var bt=Object.defineProperty;var wt=(e,o,t)=>o in e?bt(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var ee=(e,o,t)=>(wt(e,typeof o!="symbol"?o+"":o,t),t);import{V as Po,a as Do,b as Co,h as vo,r as yt,c as kt,N as St,p as No,u as to,d as _t,e as mo,f as xt,g as Rt,_ as $t}from"./index-63f1529c.js";import{r as N,w as pe,a as Pt,h as Dt,o as Ct,b as He,c as fe,d as Nt,e as he,f as W,g as b,i as w,j as F,k as oe,u as Ce,l as ao,m as Tt,n as x,p as je,q as Et,s as To,t as lo,v as co,x as be,y as Eo,z as De,A as Oe,T as Mo,B as Ke,F as Ae,C as Mt,D as It,X as At,E as no,G as go,H as ie,I as Io,J as de,K as Lt,L as Me,M as ge,N as zt,O as Ft,P as Ut,Q as Vt,R as Ot,S as Bt,U as jt,V as Kt,W as Ht,Y as Qe,Z as Ao,_ as Ne,$ as K,a0 as ro,a1 as Ie,a2 as m,a3 as q,a4 as Be,a5 as uo,a6 as Gt,a7 as qt,a8 as Lo,a9 as zo,aa as Wt,ab as Xt,ac as Yt,ad as Jt,ae as Zt,af as J,ag as Ee,ah as Fo,ai as G,aj as re,ak as Uo,al as Vo,am as Qt,an as en,ao as on,ap as Pe,aq as tn,ar as nn,as as bo,at as rn,au as eo,av as sn,aw as wo,ay as an,az as ln,aA as dn,aB as $e,aC as cn,aD as un,aE as fn,aF as hn}from"./index-bc2c245f.js";function pn(e){return o=>{o?e.value=o.$el:e.value=null}}function vn(e,o,t){if(!o)return e;const r=N(e.value);let n=null;return pe(e,i=>{n!==null&&window.clearTimeout(n),i===!0?t&&!t.value?r.value=!0:n=window.setTimeout(()=>{r.value=!0},o):r.value=!1}),r}function mn(e={},o){const t=Pt({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:r,keyup:n}=e,i=l=>{switch(l.key){case"Control":t.ctrl=!0;break;case"Meta":t.command=!0,t.win=!0;break;case"Shift":t.shift=!0;break;case"Tab":t.tab=!0;break}r!==void 0&&Object.keys(r).forEach(d=>{if(d!==l.key)return;const p=r[d];if(typeof p=="function")p(l);else{const{stop:v=!1,prevent:f=!1}=p;v&&l.stopPropagation(),f&&l.preventDefault(),p.handler(l)}})},s=l=>{switch(l.key){case"Control":t.ctrl=!1;break;case"Meta":t.command=!1,t.win=!1;break;case"Shift":t.shift=!1;break;case"Tab":t.tab=!1;break}n!==void 0&&Object.keys(n).forEach(d=>{if(d!==l.key)return;const p=n[d];if(typeof p=="function")p(l);else{const{stop:v=!1,prevent:f=!1}=p;v&&l.stopPropagation(),f&&l.preventDefault(),p.handler(l)}})},a=()=>{(o===void 0||o.value)&&(he("keydown",document,i),he("keyup",document,s)),o!==void 0&&pe(o,l=>{l?(he("keydown",document,i),he("keyup",document,s)):(fe("keydown",document,i),fe("keyup",document,s))})};return Dt()?(Ct(a),He(()=>{(o===void 0||o.value)&&(fe("keydown",document,i),fe("keyup",document,s))})):a(),Nt(t)}const gn=W({name:"ChevronRight",render(){return b("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},b("path",{d:"M5.64645 3.14645C5.45118 3.34171 5.45118 3.65829 5.64645 3.85355L9.79289 8L5.64645 12.1464C5.45118 12.3417 5.45118 12.6583 5.64645 12.8536C5.84171 13.0488 6.15829 13.0488 6.35355 12.8536L10.8536 8.35355C11.0488 8.15829 11.0488 7.84171 10.8536 7.64645L6.35355 3.14645C6.15829 2.95118 5.84171 2.95118 5.64645 3.14645Z",fill:"currentColor"}))}}),Oo=W({name:"DropdownDivider",props:{clsPrefix:{type:String,required:!0}},render(){return b("div",{class:`${this.clsPrefix}-dropdown-divider`})}}),bn=w("icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
 transform: translateZ(0);
`,[F("color-transition",{transition:"color .3s var(--n-bezier)"}),F("depth",{color:"var(--n-color)"},[oe("svg",{opacity:"var(--n-opacity)",transition:"opacity .3s var(--n-bezier)"})]),oe("svg",{height:"1em",width:"1em"})]),wn=Object.assign(Object.assign({},Ce.props),{depth:[String,Number],size:[Number,String],color:String,component:Object}),yn=W({_n_icon__:!0,name:"Icon",inheritAttrs:!1,props:wn,setup(e){const{mergedClsPrefixRef:o,inlineThemeDisabled:t}=ao(e),r=Ce("Icon","-icon",bn,Tt,e,o),n=x(()=>{const{depth:s}=e,{common:{cubicBezierEaseInOut:a},self:l}=r.value;if(s!==void 0){const{color:d,[`opacity${s}Depth`]:p}=l;return{"--n-bezier":a,"--n-color":d,"--n-opacity":p}}return{"--n-bezier":a,"--n-color":"","--n-opacity":""}}),i=t?je("icon",x(()=>`${e.depth||"d"}`),n,e):void 0;return{mergedClsPrefix:o,mergedStyle:x(()=>{const{size:s,color:a}=e;return{fontSize:Et(s),color:a}}),cssVars:t?void 0:n,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){var e;const{$parent:o,depth:t,mergedClsPrefix:r,component:n,onRender:i,themeClass:s}=this;return!((e=o==null?void 0:o.$options)===null||e===void 0)&&e._n_icon__&&To("icon","don't wrap `n-icon` inside `n-icon`"),i==null||i(),b("i",lo(this.$attrs,{role:"img",class:[`${r}-icon`,s,{[`${r}-icon--depth`]:t,[`${r}-icon--color-transition`]:t!==void 0}],style:[this.cssVars,this.mergedStyle]}),n?b(n):this.$slots)}}),fo=co("n-dropdown-menu"),Ge=co("n-dropdown"),yo=co("n-dropdown-option");function io(e,o){return e.type==="submenu"||e.type===void 0&&e[o]!==void 0}function kn(e){return e.type==="group"}function Bo(e){return e.type==="divider"}function Sn(e){return e.type==="render"}const jo=W({name:"DropdownOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null},placement:{type:String,default:"right-start"},props:Object,scrollable:Boolean},setup(e){const o=be(Ge),{hoverKeyRef:t,keyboardKeyRef:r,lastToggledSubmenuKeyRef:n,pendingKeyPathRef:i,activeKeyPathRef:s,animatedRef:a,mergedShowRef:l,renderLabelRef:d,renderIconRef:p,labelFieldRef:v,childrenFieldRef:f,renderOptionRef:D,nodePropsRef:I,menuPropsRef:k}=o,S=be(yo,null),g=be(fo),R=be(Eo),U=x(()=>e.tmNode.rawNode),L=x(()=>{const{value:$}=f;return io(e.tmNode.rawNode,$)}),j=x(()=>{const{disabled:$}=e.tmNode;return $}),ve=x(()=>{if(!L.value)return!1;const{key:$,disabled:V}=e.tmNode;if(V)return!1;const{value:ne}=t,{value:se}=r,{value:me}=n,{value:ae}=i;return ne!==null?ae.includes($):se!==null?ae.includes($)&&ae[ae.length-1]!==$:me!==null?ae.includes($):!1}),te=x(()=>r.value===null&&!a.value),y=vn(ve,300,te),C=x(()=>!!(S!=null&&S.enteringSubmenuRef.value)),O=N(!1);De(yo,{enteringSubmenuRef:O});function Q(){O.value=!0}function _(){O.value=!1}function B(){const{parentKey:$,tmNode:V}=e;V.disabled||l.value&&(n.value=$,r.value=null,t.value=V.key)}function T(){const{tmNode:$}=e;$.disabled||l.value&&t.value!==$.key&&B()}function E($){if(e.tmNode.disabled||!l.value)return;const{relatedTarget:V}=$;V&&!vo({target:V},"dropdownOption")&&!vo({target:V},"scrollbarRail")&&(t.value=null)}function Z(){const{value:$}=L,{tmNode:V}=e;l.value&&!$&&!V.disabled&&(o.doSelect(V.key,V.rawNode),o.doUpdateShow(!1))}return{labelField:v,renderLabel:d,renderIcon:p,siblingHasIcon:g.showIconRef,siblingHasSubmenu:g.hasSubmenuRef,menuProps:k,popoverBody:R,animated:a,mergedShowSubmenu:x(()=>y.value&&!C.value),rawNode:U,hasSubmenu:L,pending:Oe(()=>{const{value:$}=i,{key:V}=e.tmNode;return $.includes(V)}),childActive:Oe(()=>{const{value:$}=s,{key:V}=e.tmNode,ne=$.findIndex(se=>V===se);return ne===-1?!1:ne<$.length-1}),active:Oe(()=>{const{value:$}=s,{key:V}=e.tmNode,ne=$.findIndex(se=>V===se);return ne===-1?!1:ne===$.length-1}),mergedDisabled:j,renderOption:D,nodeProps:I,handleClick:Z,handleMouseMove:T,handleMouseEnter:B,handleMouseLeave:E,handleSubmenuBeforeEnter:Q,handleSubmenuAfterEnter:_}},render(){var e,o;const{animated:t,rawNode:r,mergedShowSubmenu:n,clsPrefix:i,siblingHasIcon:s,siblingHasSubmenu:a,renderLabel:l,renderIcon:d,renderOption:p,nodeProps:v,props:f,scrollable:D}=this;let I=null;if(n){const R=(e=this.menuProps)===null||e===void 0?void 0:e.call(this,r,r.children);I=b(Ko,Object.assign({},R,{clsPrefix:i,scrollable:this.scrollable,tmNodes:this.tmNode.children,parentKey:this.tmNode.key}))}const k={class:[`${i}-dropdown-option-body`,this.pending&&`${i}-dropdown-option-body--pending`,this.active&&`${i}-dropdown-option-body--active`,this.childActive&&`${i}-dropdown-option-body--child-active`,this.mergedDisabled&&`${i}-dropdown-option-body--disabled`],onMousemove:this.handleMouseMove,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onClick:this.handleClick},S=v==null?void 0:v(r),g=b("div",Object.assign({class:[`${i}-dropdown-option`,S==null?void 0:S.class],"data-dropdown-option":!0},S),b("div",lo(k,f),[b("div",{class:[`${i}-dropdown-option-body__prefix`,s&&`${i}-dropdown-option-body__prefix--show-icon`]},[d?d(r):Ke(r.icon)]),b("div",{"data-dropdown-option":!0,class:`${i}-dropdown-option-body__label`},l?l(r):Ke((o=r[this.labelField])!==null&&o!==void 0?o:r.title)),b("div",{"data-dropdown-option":!0,class:[`${i}-dropdown-option-body__suffix`,a&&`${i}-dropdown-option-body__suffix--has-submenu`]},this.hasSubmenu?b(yn,null,{default:()=>b(gn,null)}):null)]),this.hasSubmenu?b(Po,null,{default:()=>[b(Do,null,{default:()=>b("div",{class:`${i}-dropdown-offset-container`},b(Co,{show:this.mergedShowSubmenu,placement:this.placement,to:D&&this.popoverBody||void 0,teleportDisabled:!D},{default:()=>b("div",{class:`${i}-dropdown-menu-wrapper`},t?b(Mo,{onBeforeEnter:this.handleSubmenuBeforeEnter,onAfterEnter:this.handleSubmenuAfterEnter,name:"fade-in-scale-up-transition",appear:!0},{default:()=>I}):I)}))})]}):null);return p?p({node:g,option:r}):g}}),_n=W({name:"DropdownGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{showIconRef:e,hasSubmenuRef:o}=be(fo),{renderLabelRef:t,labelFieldRef:r,nodePropsRef:n,renderOptionRef:i}=be(Ge);return{labelField:r,showIcon:e,hasSubmenu:o,renderLabel:t,nodeProps:n,renderOption:i}},render(){var e;const{clsPrefix:o,hasSubmenu:t,showIcon:r,nodeProps:n,renderLabel:i,renderOption:s}=this,{rawNode:a}=this.tmNode,l=b("div",Object.assign({class:`${o}-dropdown-option`},n==null?void 0:n(a)),b("div",{class:`${o}-dropdown-option-body ${o}-dropdown-option-body--group`},b("div",{"data-dropdown-option":!0,class:[`${o}-dropdown-option-body__prefix`,r&&`${o}-dropdown-option-body__prefix--show-icon`]},Ke(a.icon)),b("div",{class:`${o}-dropdown-option-body__label`,"data-dropdown-option":!0},i?i(a):Ke((e=a.title)!==null&&e!==void 0?e:a[this.labelField])),b("div",{class:[`${o}-dropdown-option-body__suffix`,t&&`${o}-dropdown-option-body__suffix--has-submenu`],"data-dropdown-option":!0})));return s?s({node:l,option:a}):l}}),xn=W({name:"NDropdownGroup",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null}},render(){const{tmNode:e,parentKey:o,clsPrefix:t}=this,{children:r}=e;return b(Ae,null,b(_n,{clsPrefix:t,tmNode:e,key:e.key}),r==null?void 0:r.map(n=>{const{rawNode:i}=n;return i.show===!1?null:Bo(i)?b(Oo,{clsPrefix:t,key:n.key}):n.isGroup?(To("dropdown","`group` node is not allowed to be put in `group` node."),null):b(jo,{clsPrefix:t,tmNode:n,parentKey:o,key:n.key})}))}}),Rn=W({name:"DropdownRenderOption",props:{tmNode:{type:Object,required:!0}},render(){const{rawNode:{render:e,props:o}}=this.tmNode;return b("div",o,[e==null?void 0:e()])}}),Ko=W({name:"DropdownMenu",props:{scrollable:Boolean,showArrow:Boolean,arrowStyle:[String,Object],clsPrefix:{type:String,required:!0},tmNodes:{type:Array,default:()=>[]},parentKey:{type:[String,Number],default:null}},setup(e){const{renderIconRef:o,childrenFieldRef:t}=be(Ge);De(fo,{showIconRef:x(()=>{const n=o.value;return e.tmNodes.some(i=>{var s;if(i.isGroup)return(s=i.children)===null||s===void 0?void 0:s.some(({rawNode:l})=>n?n(l):l.icon);const{rawNode:a}=i;return n?n(a):a.icon})}),hasSubmenuRef:x(()=>{const{value:n}=t;return e.tmNodes.some(i=>{var s;if(i.isGroup)return(s=i.children)===null||s===void 0?void 0:s.some(({rawNode:l})=>io(l,n));const{rawNode:a}=i;return io(a,n)})})});const r=N(null);return De(Mt,null),De(It,null),De(Eo,r),{bodyRef:r}},render(){const{parentKey:e,clsPrefix:o,scrollable:t}=this,r=this.tmNodes.map(n=>{const{rawNode:i}=n;return i.show===!1?null:Sn(i)?b(Rn,{tmNode:n,key:n.key}):Bo(i)?b(Oo,{clsPrefix:o,key:n.key}):kn(i)?b(xn,{clsPrefix:o,tmNode:n,parentKey:e,key:n.key}):b(jo,{clsPrefix:o,tmNode:n,parentKey:e,key:n.key,props:i.props,scrollable:t})});return b("div",{class:[`${o}-dropdown-menu`,t&&`${o}-dropdown-menu--scrollable`],ref:"bodyRef"},t?b(At,{contentClass:`${o}-dropdown-menu__content`},{default:()=>r}):r,this.showArrow?yt({clsPrefix:o,arrowStyle:this.arrowStyle}):null)}}),$n=w("dropdown-menu",`
 transform-origin: var(--v-transform-origin);
 background-color: var(--n-color);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 position: relative;
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
`,[no(),w("dropdown-option",`
 position: relative;
 `,[oe("a",`
 text-decoration: none;
 color: inherit;
 outline: none;
 `,[oe("&::before",`
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),w("dropdown-option-body",`
 display: flex;
 cursor: pointer;
 position: relative;
 height: var(--n-option-height);
 line-height: var(--n-option-height);
 font-size: var(--n-font-size);
 color: var(--n-option-text-color);
 transition: color .3s var(--n-bezier);
 `,[oe("&::before",`
 content: "";
 position: absolute;
 top: 0;
 bottom: 0;
 left: 4px;
 right: 4px;
 transition: background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 `),go("disabled",[F("pending",`
 color: var(--n-option-text-color-hover);
 `,[ie("prefix, suffix",`
 color: var(--n-option-text-color-hover);
 `),oe("&::before","background-color: var(--n-option-color-hover);")]),F("active",`
 color: var(--n-option-text-color-active);
 `,[ie("prefix, suffix",`
 color: var(--n-option-text-color-active);
 `),oe("&::before","background-color: var(--n-option-color-active);")]),F("child-active",`
 color: var(--n-option-text-color-child-active);
 `,[ie("prefix, suffix",`
 color: var(--n-option-text-color-child-active);
 `)])]),F("disabled",`
 cursor: not-allowed;
 opacity: var(--n-option-opacity-disabled);
 `),F("group",`
 font-size: calc(var(--n-font-size) - 1px);
 color: var(--n-group-header-text-color);
 `,[ie("prefix",`
 width: calc(var(--n-option-prefix-width) / 2);
 `,[F("show-icon",`
 width: calc(var(--n-option-icon-prefix-width) / 2);
 `)])]),ie("prefix",`
 width: var(--n-option-prefix-width);
 display: flex;
 justify-content: center;
 align-items: center;
 color: var(--n-prefix-color);
 transition: color .3s var(--n-bezier);
 z-index: 1;
 `,[F("show-icon",`
 width: var(--n-option-icon-prefix-width);
 `),w("icon",`
 font-size: var(--n-option-icon-size);
 `)]),ie("label",`
 white-space: nowrap;
 flex: 1;
 z-index: 1;
 `),ie("suffix",`
 box-sizing: border-box;
 flex-grow: 0;
 flex-shrink: 0;
 display: flex;
 justify-content: flex-end;
 align-items: center;
 min-width: var(--n-option-suffix-width);
 padding: 0 8px;
 transition: color .3s var(--n-bezier);
 color: var(--n-suffix-color);
 z-index: 1;
 `,[F("has-submenu",`
 width: var(--n-option-icon-suffix-width);
 `),w("icon",`
 font-size: var(--n-option-icon-size);
 `)]),w("dropdown-menu","pointer-events: all;")]),w("dropdown-offset-container",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: -4px;
 bottom: -4px;
 `)]),w("dropdown-divider",`
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-divider-color);
 height: 1px;
 margin: 4px 0;
 `),w("dropdown-menu-wrapper",`
 transform-origin: var(--v-transform-origin);
 width: fit-content;
 `),oe(">",[w("scrollbar",`
 height: inherit;
 max-height: inherit;
 `)]),go("scrollable",`
 padding: var(--n-padding);
 `),F("scrollable",[ie("content",`
 padding: var(--n-padding);
 `)])]),Pn={animated:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},size:{type:String,default:"medium"},inverted:Boolean,placement:{type:String,default:"bottom"},onSelect:[Function,Array],options:{type:Array,default:()=>[]},menuProps:Function,showArrow:Boolean,renderLabel:Function,renderIcon:Function,renderOption:Function,nodeProps:Function,labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},value:[String,Number]},Dn=Object.keys(No),Cn=Object.assign(Object.assign(Object.assign({},No),Pn),Ce.props),Nn=W({name:"Dropdown",inheritAttrs:!1,props:Cn,setup(e){const o=N(!1),t=Io(de(e,"show"),o),r=x(()=>{const{keyField:_,childrenField:B}=e;return kt(e.options,{getKey(T){return T[_]},getDisabled(T){return T.disabled===!0},getIgnored(T){return T.type==="divider"||T.type==="render"},getChildren(T){return T[B]}})}),n=x(()=>r.value.treeNodes),i=N(null),s=N(null),a=N(null),l=x(()=>{var _,B,T;return(T=(B=(_=i.value)!==null&&_!==void 0?_:s.value)!==null&&B!==void 0?B:a.value)!==null&&T!==void 0?T:null}),d=x(()=>r.value.getPath(l.value).keyPath),p=x(()=>r.value.getPath(e.value).keyPath),v=Oe(()=>e.keyboard&&t.value);mn({keydown:{ArrowUp:{prevent:!0,handler:j},ArrowRight:{prevent:!0,handler:L},ArrowDown:{prevent:!0,handler:ve},ArrowLeft:{prevent:!0,handler:U},Enter:{prevent:!0,handler:te},Escape:R}},v);const{mergedClsPrefixRef:f,inlineThemeDisabled:D}=ao(e),I=Ce("Dropdown","-dropdown",$n,Lt,e,f);De(Ge,{labelFieldRef:de(e,"labelField"),childrenFieldRef:de(e,"childrenField"),renderLabelRef:de(e,"renderLabel"),renderIconRef:de(e,"renderIcon"),hoverKeyRef:i,keyboardKeyRef:s,lastToggledSubmenuKeyRef:a,pendingKeyPathRef:d,activeKeyPathRef:p,animatedRef:de(e,"animated"),mergedShowRef:t,nodePropsRef:de(e,"nodeProps"),renderOptionRef:de(e,"renderOption"),menuPropsRef:de(e,"menuProps"),doSelect:k,doUpdateShow:S}),pe(t,_=>{!e.animated&&!_&&g()});function k(_,B){const{onSelect:T}=e;T&&Me(T,_,B)}function S(_){const{"onUpdate:show":B,onUpdateShow:T}=e;B&&Me(B,_),T&&Me(T,_),o.value=_}function g(){i.value=null,s.value=null,a.value=null}function R(){S(!1)}function U(){C("left")}function L(){C("right")}function j(){C("up")}function ve(){C("down")}function te(){const _=y();_!=null&&_.isLeaf&&t.value&&(k(_.key,_.rawNode),S(!1))}function y(){var _;const{value:B}=r,{value:T}=l;return!B||T===null?null:(_=B.getNode(T))!==null&&_!==void 0?_:null}function C(_){const{value:B}=l,{value:{getFirstAvailableNode:T}}=r;let E=null;if(B===null){const Z=T();Z!==null&&(E=Z.key)}else{const Z=y();if(Z){let $;switch(_){case"down":$=Z.getNext();break;case"up":$=Z.getPrev();break;case"right":$=Z.getChild();break;case"left":$=Z.getParent();break}$&&(E=$.key)}}E!==null&&(i.value=null,s.value=E)}const O=x(()=>{const{size:_,inverted:B}=e,{common:{cubicBezierEaseInOut:T},self:E}=I.value,{padding:Z,dividerColor:$,borderRadius:V,optionOpacityDisabled:ne,[ge("optionIconSuffixWidth",_)]:se,[ge("optionSuffixWidth",_)]:me,[ge("optionIconPrefixWidth",_)]:ae,[ge("optionPrefixWidth",_)]:Se,[ge("fontSize",_)]:Xe,[ge("optionHeight",_)]:Ye,[ge("optionIconSize",_)]:_e}=E,z={"--n-bezier":T,"--n-font-size":Xe,"--n-padding":Z,"--n-border-radius":V,"--n-option-height":Ye,"--n-option-prefix-width":Se,"--n-option-icon-prefix-width":ae,"--n-option-suffix-width":me,"--n-option-icon-suffix-width":se,"--n-option-icon-size":_e,"--n-divider-color":$,"--n-option-opacity-disabled":ne};return B?(z["--n-color"]=E.colorInverted,z["--n-option-color-hover"]=E.optionColorHoverInverted,z["--n-option-color-active"]=E.optionColorActiveInverted,z["--n-option-text-color"]=E.optionTextColorInverted,z["--n-option-text-color-hover"]=E.optionTextColorHoverInverted,z["--n-option-text-color-active"]=E.optionTextColorActiveInverted,z["--n-option-text-color-child-active"]=E.optionTextColorChildActiveInverted,z["--n-prefix-color"]=E.prefixColorInverted,z["--n-suffix-color"]=E.suffixColorInverted,z["--n-group-header-text-color"]=E.groupHeaderTextColorInverted):(z["--n-color"]=E.color,z["--n-option-color-hover"]=E.optionColorHover,z["--n-option-color-active"]=E.optionColorActive,z["--n-option-text-color"]=E.optionTextColor,z["--n-option-text-color-hover"]=E.optionTextColorHover,z["--n-option-text-color-active"]=E.optionTextColorActive,z["--n-option-text-color-child-active"]=E.optionTextColorChildActive,z["--n-prefix-color"]=E.prefixColor,z["--n-suffix-color"]=E.suffixColor,z["--n-group-header-text-color"]=E.groupHeaderTextColor),z}),Q=D?je("dropdown",x(()=>`${e.size[0]}${e.inverted?"i":""}`),O,e):void 0;return{mergedClsPrefix:f,mergedTheme:I,tmNodes:n,mergedShow:t,handleAfterLeave:()=>{e.animated&&g()},doUpdateShow:S,cssVars:D?void 0:O,themeClass:Q==null?void 0:Q.themeClass,onRender:Q==null?void 0:Q.onRender}},render(){const e=(r,n,i,s,a)=>{var l;const{mergedClsPrefix:d,menuProps:p}=this;(l=this.onRender)===null||l===void 0||l.call(this);const v=(p==null?void 0:p(void 0,this.tmNodes.map(D=>D.rawNode)))||{},f={ref:pn(n),class:[r,`${d}-dropdown`,this.themeClass],clsPrefix:d,tmNodes:this.tmNodes,style:[i,this.cssVars],showArrow:this.showArrow,arrowStyle:this.arrowStyle,scrollable:this.scrollable,onMouseenter:s,onMouseleave:a};return b(Ko,lo(this.$attrs,f,v))},{mergedTheme:o}=this,t={show:this.mergedShow,theme:o.peers.Popover,themeOverrides:o.peerOverrides.Popover,internalOnAfterLeave:this.handleAfterLeave,internalRenderBody:e,onUpdateShow:this.doUpdateShow,"onUpdate:show":void 0};return b(St,Object.assign({},zt(this.$props,Dn),t),{trigger:()=>{var r,n;return(n=(r=this.$slots).default)===null||n===void 0?void 0:n.call(r)}})}}),Tn=e=>{const o="rgba(0, 0, 0, .85)",t="0 2px 8px 0 rgba(0, 0, 0, 0.12)",{railColor:r,primaryColor:n,baseColor:i,cardColor:s,modalColor:a,popoverColor:l,borderRadius:d,fontSize:p,opacityDisabled:v}=e;return Object.assign(Object.assign({},Ut),{fontSize:p,markFontSize:p,railColor:r,railColorHover:r,fillColor:n,fillColorHover:n,opacityDisabled:v,handleColor:"#FFF",dotColor:s,dotColorModal:a,dotColorPopover:l,handleBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowHover:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowActive:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowFocus:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",indicatorColor:o,indicatorBoxShadow:t,indicatorTextColor:i,indicatorBorderRadius:d,dotBorder:`2px solid ${r}`,dotBorderActive:`2px solid ${n}`,dotBoxShadow:""})},En={name:"Slider",common:Ft,self:Tn},Mn=En;function ko(e){return window.TouchEvent&&e instanceof window.TouchEvent}function So(){const e=N(new Map),o=t=>r=>{e.value.set(t,r)};return Vt(()=>{e.value.clear()}),[e,o]}const In=oe([w("slider",`
 display: block;
 padding: calc((var(--n-handle-size) - var(--n-rail-height)) / 2) 0;
 position: relative;
 z-index: 0;
 width: 100%;
 cursor: pointer;
 user-select: none;
 -webkit-user-select: none;
 `,[F("reverse",[w("slider-handles",[w("slider-handle-wrapper",`
 transform: translate(50%, -50%);
 `)]),w("slider-dots",[w("slider-dot",`
 transform: translateX(50%, -50%);
 `)]),F("vertical",[w("slider-handles",[w("slider-handle-wrapper",`
 transform: translate(-50%, -50%);
 `)]),w("slider-marks",[w("slider-mark",`
 transform: translateY(calc(-50% + var(--n-dot-height) / 2));
 `)]),w("slider-dots",[w("slider-dot",`
 transform: translateX(-50%) translateY(0);
 `)])])]),F("vertical",`
 padding: 0 calc((var(--n-handle-size) - var(--n-rail-height)) / 2);
 width: var(--n-rail-width-vertical);
 height: 100%;
 `,[w("slider-handles",`
 top: calc(var(--n-handle-size) / 2);
 right: 0;
 bottom: calc(var(--n-handle-size) / 2);
 left: 0;
 `,[w("slider-handle-wrapper",`
 top: unset;
 left: 50%;
 transform: translate(-50%, 50%);
 `)]),w("slider-rail",`
 height: 100%;
 `,[ie("fill",`
 top: unset;
 right: 0;
 bottom: unset;
 left: 0;
 `)]),F("with-mark",`
 width: var(--n-rail-width-vertical);
 margin: 0 32px 0 8px;
 `),w("slider-marks",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 22px;
 font-size: var(--n-mark-font-size);
 `,[w("slider-mark",`
 transform: translateY(50%);
 white-space: nowrap;
 `)]),w("slider-dots",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 50%;
 `,[w("slider-dot",`
 transform: translateX(-50%) translateY(50%);
 `)])]),F("disabled",`
 cursor: not-allowed;
 opacity: var(--n-opacity-disabled);
 `,[w("slider-handle",`
 cursor: not-allowed;
 `)]),F("with-mark",`
 width: 100%;
 margin: 8px 0 32px 0;
 `),oe("&:hover",[w("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[ie("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),w("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),F("active",[w("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[ie("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),w("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),w("slider-marks",`
 position: absolute;
 top: 18px;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[w("slider-mark",`
 position: absolute;
 transform: translateX(-50%);
 white-space: nowrap;
 `)]),w("slider-rail",`
 width: 100%;
 position: relative;
 height: var(--n-rail-height);
 background-color: var(--n-rail-color);
 transition: background-color .3s var(--n-bezier);
 border-radius: calc(var(--n-rail-height) / 2);
 `,[ie("fill",`
 position: absolute;
 top: 0;
 bottom: 0;
 border-radius: calc(var(--n-rail-height) / 2);
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-fill-color);
 `)]),w("slider-handles",`
 position: absolute;
 top: 0;
 right: calc(var(--n-handle-size) / 2);
 bottom: 0;
 left: calc(var(--n-handle-size) / 2);
 `,[w("slider-handle-wrapper",`
 outline: none;
 position: absolute;
 top: 50%;
 transform: translate(-50%, -50%);
 cursor: pointer;
 display: flex;
 `,[w("slider-handle",`
 height: var(--n-handle-size);
 width: var(--n-handle-size);
 border-radius: 50%;
 overflow: hidden;
 transition: box-shadow .2s var(--n-bezier), background-color .3s var(--n-bezier);
 background-color: var(--n-handle-color);
 box-shadow: var(--n-handle-box-shadow);
 `,[oe("&:hover",`
 box-shadow: var(--n-handle-box-shadow-hover);
 `)]),oe("&:focus",[w("slider-handle",`
 box-shadow: var(--n-handle-box-shadow-focus);
 `,[oe("&:hover",`
 box-shadow: var(--n-handle-box-shadow-active);
 `)])])])]),w("slider-dots",`
 position: absolute;
 top: 50%;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[F("transition-disabled",[w("slider-dot","transition: none;")]),w("slider-dot",`
 transition:
 border-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 transform: translate(-50%, -50%);
 height: var(--n-dot-height);
 width: var(--n-dot-width);
 border-radius: var(--n-dot-border-radius);
 overflow: hidden;
 box-sizing: border-box;
 border: var(--n-dot-border);
 background-color: var(--n-dot-color);
 `,[F("active","border: var(--n-dot-border-active);")])])]),w("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[no()]),w("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[F("top",`
 margin-bottom: 12px;
 `),F("right",`
 margin-left: 12px;
 `),F("bottom",`
 margin-top: 12px;
 `),F("left",`
 margin-right: 12px;
 `),no()]),Ot(w("slider",[w("slider-dot","background-color: var(--n-dot-color-modal);")])),Bt(w("slider",[w("slider-dot","background-color: var(--n-dot-color-popover);")]))]),An=0,Ln=Object.assign(Object.assign({},Ce.props),{to:to.propTo,defaultValue:{type:[Number,Array],default:0},marks:Object,disabled:{type:Boolean,default:void 0},formatTooltip:Function,keyboard:{type:Boolean,default:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:[Number,String],default:1},range:Boolean,value:[Number,Array],placement:String,showTooltip:{type:Boolean,default:void 0},tooltip:{type:Boolean,default:!0},vertical:Boolean,reverse:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),zn=W({name:"Slider",props:Ln,setup(e){const{mergedClsPrefixRef:o,namespaceRef:t,inlineThemeDisabled:r}=ao(e),n=Ce("Slider","-slider",In,Mn,e,o),i=N(null),[s,a]=So(),[l,d]=So(),p=N(new Set),v=jt(e),{mergedDisabledRef:f}=v,D=x(()=>{const{step:c}=e;if(Number(c)<=0||c==="mark")return 0;const u=c.toString();let h=0;return u.includes(".")&&(h=u.length-u.indexOf(".")-1),h}),I=N(e.defaultValue),k=de(e,"value"),S=Io(k,I),g=x(()=>{const{value:c}=S;return(e.range?c:[c]).map(ae)}),R=x(()=>g.value.length>2),U=x(()=>e.placement===void 0?e.vertical?"right":"top":e.placement),L=x(()=>{const{marks:c}=e;return c?Object.keys(c).map(parseFloat):null}),j=N(-1),ve=N(-1),te=N(-1),y=N(!1),C=N(!1),O=x(()=>{const{vertical:c,reverse:u}=e;return c?u?"top":"bottom":u?"right":"left"}),Q=x(()=>{if(R.value)return;const c=g.value,u=Se(e.range?Math.min(...c):e.min),h=Se(e.range?Math.max(...c):c[0]),{value:P}=O;return e.vertical?{[P]:`${u}%`,height:`${h-u}%`}:{[P]:`${u}%`,width:`${h-u}%`}}),_=x(()=>{const c=[],{marks:u}=e;if(u){const h=g.value.slice();h.sort((X,Y)=>X-Y);const{value:P}=O,{value:A}=R,{range:H}=e,le=A?()=>!1:X=>H?X>=h[0]&&X<=h[h.length-1]:X<=h[0];for(const X of Object.keys(u)){const Y=Number(X);c.push({active:le(Y),label:u[X],style:{[P]:`${Se(Y)}%`}})}}return c});function B(c,u){const h=Se(c),{value:P}=O;return{[P]:`${h}%`,zIndex:u===j.value?1:0}}function T(c){return e.showTooltip||te.value===c||j.value===c&&y.value}function E(c){return y.value?!(j.value===c&&ve.value===c):!0}function Z(c){var u;~c&&(j.value=c,(u=s.value.get(c))===null||u===void 0||u.focus())}function $(){l.value.forEach((c,u)=>{T(u)&&c.syncPosition()})}function V(c){const{"onUpdate:value":u,onUpdateValue:h}=e,{nTriggerFormInput:P,nTriggerFormChange:A}=v;h&&Me(h,c),u&&Me(u,c),I.value=c,P(),A()}function ne(c){const{range:u}=e;if(u){if(Array.isArray(c)){const{value:h}=g;c.join()!==h.join()&&V(c)}}else Array.isArray(c)||g.value[0]!==c&&V(c)}function se(c,u){if(e.range){const h=g.value.slice();h.splice(u,1,c),ne(h)}else ne(c)}function me(c,u,h){const P=h!==void 0;h||(h=c-u>0?1:-1);const A=L.value||[],{step:H}=e;if(H==="mark"){const Y=_e(c,A.concat(u),P?h:void 0);return Y?Y.value:u}if(H<=0)return u;const{value:le}=D;let X;if(P){const Y=Number((u/H).toFixed(le)),ue=Math.floor(Y),Je=Y>ue?ue:ue-1,Ze=Y<ue?ue:ue+1;X=_e(u,[Number((Je*H).toFixed(le)),Number((Ze*H).toFixed(le)),...A],h)}else{const Y=Ye(c);X=_e(c,[...A,Y])}return X?ae(X.value):u}function ae(c){return Math.min(e.max,Math.max(e.min,c))}function Se(c){const{max:u,min:h}=e;return(c-h)/(u-h)*100}function Xe(c){const{max:u,min:h}=e;return h+(u-h)*c}function Ye(c){const{step:u,min:h}=e;if(Number(u)<=0||u==="mark")return c;const P=Math.round((c-h)/u)*u+h;return Number(P.toFixed(D.value))}function _e(c,u=L.value,h){if(!(u!=null&&u.length))return null;let P=null,A=-1;for(;++A<u.length;){const H=u[A]-c,le=Math.abs(H);(h===void 0||H*h>0)&&(P===null||le<P.distance)&&(P={index:A,distance:le,value:u[A]})}return P}function z(c){const u=i.value;if(!u)return;const h=ko(c)?c.touches[0]:c,P=u.getBoundingClientRect();let A;return e.vertical?A=(P.bottom-h.clientY)/P.height:A=(h.clientX-P.left)/P.width,e.reverse&&(A=1-A),Xe(A)}function Zo(c){if(f.value||!e.keyboard)return;const{vertical:u,reverse:h}=e;switch(c.key){case"ArrowUp":c.preventDefault(),ze(u&&h?-1:1);break;case"ArrowRight":c.preventDefault(),ze(!u&&h?-1:1);break;case"ArrowDown":c.preventDefault(),ze(u&&h?1:-1);break;case"ArrowLeft":c.preventDefault(),ze(!u&&h?1:-1);break}}function ze(c){const u=j.value;if(u===-1)return;const{step:h}=e,P=g.value[u],A=Number(h)<=0||h==="mark"?P:P+h*c;se(me(A,P,c>0?1:-1),u)}function Qo(c){var u,h;if(f.value||!ko(c)&&c.button!==An)return;const P=z(c);if(P===void 0)return;const A=g.value.slice(),H=e.range?(h=(u=_e(P,A))===null||u===void 0?void 0:u.index)!==null&&h!==void 0?h:-1:0;H!==-1&&(c.preventDefault(),Z(H),et(),se(me(P,g.value[H]),H))}function et(){y.value||(y.value=!0,he("touchend",document,Ve),he("mouseup",document,Ve),he("touchmove",document,Ue),he("mousemove",document,Ue))}function Fe(){y.value&&(y.value=!1,fe("touchend",document,Ve),fe("mouseup",document,Ve),fe("touchmove",document,Ue),fe("mousemove",document,Ue))}function Ue(c){const{value:u}=j;if(!y.value||u===-1){Fe();return}const h=z(c);se(me(h,g.value[u]),u)}function Ve(){Fe()}function ot(c){j.value=c,f.value||(te.value=c)}function tt(c){j.value===c&&(j.value=-1,Fe()),te.value===c&&(te.value=-1)}function nt(c){te.value=c}function rt(c){te.value===c&&(te.value=-1)}pe(j,(c,u)=>void Qe(()=>ve.value=u)),pe(S,()=>{if(e.marks){if(C.value)return;C.value=!0,Qe(()=>{C.value=!1})}Qe($)}),He(()=>{Fe()});const ho=x(()=>{const{self:{markFontSize:c,railColor:u,railColorHover:h,fillColor:P,fillColorHover:A,handleColor:H,opacityDisabled:le,dotColor:X,dotColorModal:Y,handleBoxShadow:ue,handleBoxShadowHover:Je,handleBoxShadowActive:Ze,handleBoxShadowFocus:it,dotBorder:st,dotBoxShadow:at,railHeight:lt,railWidthVertical:dt,handleSize:ct,dotHeight:ut,dotWidth:ft,dotBorderRadius:ht,fontSize:pt,dotBorderActive:vt,dotColorPopover:mt},common:{cubicBezierEaseInOut:gt}}=n.value;return{"--n-bezier":gt,"--n-dot-border":st,"--n-dot-border-active":vt,"--n-dot-border-radius":ht,"--n-dot-box-shadow":at,"--n-dot-color":X,"--n-dot-color-modal":Y,"--n-dot-color-popover":mt,"--n-dot-height":ut,"--n-dot-width":ft,"--n-fill-color":P,"--n-fill-color-hover":A,"--n-font-size":pt,"--n-handle-box-shadow":ue,"--n-handle-box-shadow-active":Ze,"--n-handle-box-shadow-focus":it,"--n-handle-box-shadow-hover":Je,"--n-handle-color":H,"--n-handle-size":ct,"--n-opacity-disabled":le,"--n-rail-color":u,"--n-rail-color-hover":h,"--n-rail-height":lt,"--n-rail-width-vertical":dt,"--n-mark-font-size":c}}),xe=r?je("slider",void 0,ho,e):void 0,po=x(()=>{const{self:{fontSize:c,indicatorColor:u,indicatorBoxShadow:h,indicatorTextColor:P,indicatorBorderRadius:A}}=n.value;return{"--n-font-size":c,"--n-indicator-border-radius":A,"--n-indicator-box-shadow":h,"--n-indicator-color":u,"--n-indicator-text-color":P}}),Re=r?je("slider-indicator",void 0,po,e):void 0;return{mergedClsPrefix:o,namespace:t,uncontrolledValue:I,mergedValue:S,mergedDisabled:f,mergedPlacement:U,isMounted:Kt(),adjustedTo:to(e),dotTransitionDisabled:C,markInfos:_,isShowTooltip:T,shouldKeepTooltipTransition:E,handleRailRef:i,setHandleRefs:a,setFollowerRefs:d,fillStyle:Q,getHandleStyle:B,activeIndex:j,arrifiedValues:g,followerEnabledIndexSet:p,handleRailMouseDown:Qo,handleHandleFocus:ot,handleHandleBlur:tt,handleHandleMouseEnter:nt,handleHandleMouseLeave:rt,handleRailKeyDown:Zo,indicatorCssVars:r?void 0:po,indicatorThemeClass:Re==null?void 0:Re.themeClass,indicatorOnRender:Re==null?void 0:Re.onRender,cssVars:r?void 0:ho,themeClass:xe==null?void 0:xe.themeClass,onRender:xe==null?void 0:xe.onRender}},render(){var e;const{mergedClsPrefix:o,themeClass:t,formatTooltip:r}=this;return(e=this.onRender)===null||e===void 0||e.call(this),b("div",{class:[`${o}-slider`,t,{[`${o}-slider--disabled`]:this.mergedDisabled,[`${o}-slider--active`]:this.activeIndex!==-1,[`${o}-slider--with-mark`]:this.marks,[`${o}-slider--vertical`]:this.vertical,[`${o}-slider--reverse`]:this.reverse}],style:this.cssVars,onKeydown:this.handleRailKeyDown,onMousedown:this.handleRailMouseDown,onTouchstart:this.handleRailMouseDown},b("div",{class:`${o}-slider-rail`},b("div",{class:`${o}-slider-rail__fill`,style:this.fillStyle}),this.marks?b("div",{class:[`${o}-slider-dots`,this.dotTransitionDisabled&&`${o}-slider-dots--transition-disabled`]},this.markInfos.map(n=>b("div",{key:n.label,class:[`${o}-slider-dot`,{[`${o}-slider-dot--active`]:n.active}],style:n.style}))):null,b("div",{ref:"handleRailRef",class:`${o}-slider-handles`},this.arrifiedValues.map((n,i)=>{const s=this.isShowTooltip(i);return b(Po,null,{default:()=>[b(Do,null,{default:()=>b("div",{ref:this.setHandleRefs(i),class:`${o}-slider-handle-wrapper`,tabindex:this.mergedDisabled?-1:0,style:this.getHandleStyle(n,i),onFocus:()=>{this.handleHandleFocus(i)},onBlur:()=>{this.handleHandleBlur(i)},onMouseenter:()=>{this.handleHandleMouseEnter(i)},onMouseleave:()=>{this.handleHandleMouseLeave(i)}},Ht(this.$slots.thumb,()=>[b("div",{class:`${o}-slider-handle`})]))}),this.tooltip&&b(Co,{ref:this.setFollowerRefs(i),show:s,to:this.adjustedTo,enabled:this.showTooltip&&!this.range||this.followerEnabledIndexSet.has(i),teleportDisabled:this.adjustedTo===to.tdkey,placement:this.mergedPlacement,containerClass:this.namespace},{default:()=>b(Mo,{name:"fade-in-scale-up-transition",appear:this.isMounted,css:this.shouldKeepTooltipTransition(i),onEnter:()=>{this.followerEnabledIndexSet.add(i)},onAfterLeave:()=>{this.followerEnabledIndexSet.delete(i)}},{default:()=>{var a;return s?((a=this.indicatorOnRender)===null||a===void 0||a.call(this),b("div",{class:[`${o}-slider-handle-indicator`,this.indicatorThemeClass,`${o}-slider-handle-indicator--${this.mergedPlacement}`],style:this.indicatorCssVars},typeof r=="function"?r(n):n)):null}})})]})})),this.marks?b("div",{class:`${o}-slider-marks`},this.markInfos.map(n=>b("div",{key:n.label,class:`${o}-slider-mark`,style:n.style},n.label))):null))}}),Fn=W({name:"DialogTextEdit",props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},placeholder:{type:String,default:""},text:{type:String,default:""},isTextarea:{type:Boolean,default:!1},maxlength:{type:Number,default:null}},emits:["onSave"],setup(e,{emit:o}){const{text:t}=Ao(e),r=_t(e,o,"visible"),n=N("");pe(t,s=>{n.value=s});const i=N();return pe(r,s=>{s&&setTimeout(()=>{i.value.focus()},100)}),{inputRef:i,mVisible:r,editingText:n,handleSave(){n.value&&o("onSave",n.value)}}}});const Un=["disabled"];function Vn(e,o,t,r,n,i){const s=Gt,a=qt;return K(),ro(a,{preset:"dialog","negative-text":"Cancel","positive-text":"Done",title:e.title,onPositiveClick:e.handleSave,onNegativeClick:o[2]||(o[2]=l=>e.mVisible=!1),onClose:o[3]||(o[3]=l=>e.mVisible=!1),show:e.mVisible,class:"dialog-text-edit"},{action:Ie(()=>[m("button",{disabled:!e.editingText,class:"btn-no-style themed-button active btn-submit",onClick:o[1]||(o[1]=(...l)=>e.handleSave&&e.handleSave(...l))},q(e.$t("actions.save")),9,Un)]),default:Ie(()=>[e.mVisible?(K(),ro(s,{key:0,ref:"inputRef",type:e.isTextarea?"textarea":"text",value:e.editingText,"onUpdate:value":o[0]||(o[0]=l=>e.editingText=l),class:"font-code",rows:e.isTextarea?25:null,placeholder:e.placeholder,autofocus:"",onKeyup:Be(e.handleSave,["enter"]),maxlength:e.maxlength,"show-count":""},null,8,["type","value","rows","placeholder","onKeyup","maxlength"])):uo("",!0)]),_:1},8,["title","onPositiveClick","show"])}const Ho=Ne(Fn,[["render",Vn]]),On=e=>{const o=N([]),t=N(!1),r=N(0),n=N(0),i=N(null),s=(a,l)=>{i.value=a,l()};return{editingNode:i,nodeAction:s,rightMenuOptions:o,showRightMenu:t,xRef:r,yRef:n,handleSelect:()=>{t.value=!1},handleClickOutside:()=>{t.value=!1,s(null,()=>{})},handleContextmenu(a,l){o.value=e(l),t.value=!0,r.value=a.clientX,n.value=a.clientY,a.preventDefault()}}},Bn=W({name:"PresetPos",components:{DialogTextEdit:Ho},setup(e,{emit:o}){const t=Lo(),{t:r}=zo(),n=x(()=>{const g=[0,1,2],R=t.wsData.preset_cnt,U={};return R.forEach(L=>{U[L.id]={...L,name_decoded:xt(L.name)}}),g.map(L=>U[L]?U[L]:{id:L,isEmpty:!0})}),i=N(!1),s=N(""),a=N(null),l=async g=>{console.log(g),s.value=g.name_decoded,i.value=!0,a.value=g},d=async g=>{try{i.value=!1,t.isActionLock=!0;const R=a.value;if(!R){console.error("renameEditingItem not exist");return}if(!g||g===R.name_decoded)return;await Wt({id:R.id,name:mo(g)})}catch(R){console.error(R)}finally{t.isActionLock=!1}},p=async g=>{try{t.isActionLock=!0,await Jt({id:g.id}),window.$toast.success(r("messages.update_success"))}catch(R){console.error(R)}finally{t.isActionLock=!1}},v=async g=>{try{t.isActionLock=!0,await Xt({id:g,name:mo(`${r("common.pre_position_s")}${g+1}`)})}catch(R){console.error(R)}finally{t.isActionLock=!1}},f=async g=>{try{t.isActionLock=!0,await Yt({id:g})}catch(R){console.error(R)}finally{setTimeout(()=>{t.isActionLock=!1},500)}},D=async g=>{try{t.isActionLock=!0,await Zt({id:g}),window.$toast.success(r("messages.del_success"))}catch(R){console.error(R)}finally{t.isActionLock=!1}},I=g=>[{label:r("actions.update"),props:{onClick:()=>{p(g)}}},{label:r("actions.delete"),props:{onClick:()=>{D(g.id)}}},{label:r("actions.rename"),props:{onClick:()=>{l(g)}}}],{handleContextmenu:k,...S}=On(I);return{presetPosDisplayList:n,handleAddPresetPos:v,handleTriggerPresetPos:f,handleContextmenu:k,isShowRenameDialog:i,renameText:s,handleRenamePresetPos:d,...S}}}),jn=""+new URL("icon_position_n-5442716a.svg",import.meta.url).href;const Kn=e=>(Uo("data-v-56aa567d"),e=e(),Vo(),e),Hn={class:"control-card"},Gn={class:"s-header"},qn=Kn(()=>m("img",{src:jn,class:"h-icon"},null,-1)),Wn={class:"s-content _pm"},Xn={class:"prepos-list"},Yn={key:0,class:"pos-item"},Jn=["onClick"],Zn={key:1,class:"pos-item"},Qn=["onClick","onContextmenu"],er={key:0},or={key:1};function tr(e,o,t,r,n,i){const s=Nn,a=Ho;return K(),J("div",Hn,[m("div",Gn,[qn,Ee(" "+q(e.$t("common.pre_position")),1)]),m("div",Wn,[m("div",Xn,[(K(!0),J(Ae,null,Fo(e.presetPosDisplayList,l=>(K(),J(Ae,{key:l.id},[l.isEmpty?(K(),J("div",Yn,[m("button",{class:"btn-pos btn-no-style themed-button",onClick:d=>e.handleAddPresetPos(l.id),onContextmenu:o[0]||(o[0]=G(()=>{},["prevent"]))},q(e.$t("actions.add")),41,Jn)])):(K(),J("div",Zn,[m("button",{onClick:d=>e.handleTriggerPresetPos(l.id),class:"btn-pos btn-no-style themed-button",onContextmenu:d=>e.handleContextmenu(d,l)},[l.name_decoded?(K(),J("span",er,q(l.name_decoded),1)):(K(),J("span",or,q(e.$t("common.pre_position_s"))+" "+q(l.id+1),1))],40,Qn)]))],64))),128))]),re(s,{trigger:"manual",placement:"bottom-start",show:e.showRightMenu,options:e.rightMenuOptions,x:e.xRef,y:e.yRef,onSelect:e.handleSelect,"key-field":"label",size:"large",width:"170",style:{"background-color":"#222426"},"on-clickoutside":e.handleClickOutside},null,8,["show","options","x","y","onSelect","on-clickoutside"])]),re(a,{visible:e.isShowRenameDialog,"onUpdate:visible":o[1]||(o[1]=l=>e.isShowRenameDialog=l),title:e.$t("messages.please_input_name"),text:e.renameText,maxlength:7,onOnSave:e.handleRenamePresetPos},null,8,["visible","title","text","onOnSave"])])}const Go=Ne(Bn,[["render",tr],["__scopeId","data-v-56aa567d"]]);var nr=20,rr=1,we=1e6,_o=1e6,ir=-7,sr=21,ar=!1,Le="[big.js] ",ye=Le+"Invalid ",qe=ye+"decimal places",lr=ye+"rounding mode",qo=Le+"Division by zero",M={},ce=void 0,dr=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Wo(){function e(o){var t=this;if(!(t instanceof e))return o===ce?Wo():new e(o);if(o instanceof e)t.s=o.s,t.e=o.e,t.c=o.c.slice();else{if(typeof o!="string"){if(e.strict===!0&&typeof o!="bigint")throw TypeError(ye+"value");o=o===0&&1/o<0?"-0":String(o)}cr(t,o)}t.constructor=e}return e.prototype=M,e.DP=nr,e.RM=rr,e.NE=ir,e.PE=sr,e.strict=ar,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}function cr(e,o){var t,r,n;if(!dr.test(o))throw Error(ye+"number");for(e.s=o.charAt(0)=="-"?(o=o.slice(1),-1):1,(t=o.indexOf("."))>-1&&(o=o.replace(".","")),(r=o.search(/e/i))>0?(t<0&&(t=r),t+=+o.slice(r+1),o=o.substring(0,r)):t<0&&(t=o.length),n=o.length,r=0;r<n&&o.charAt(r)=="0";)++r;if(r==n)e.c=[e.e=0];else{for(;n>0&&o.charAt(--n)=="0";);for(e.e=t-r-1,e.c=[],t=0;r<=n;)e.c[t++]=+o.charAt(r++)}return e}function ke(e,o,t,r){var n=e.c;if(t===ce&&(t=e.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(lr);if(o<1)r=t===3&&(r||!!n[0])||o===0&&(t===1&&n[0]>=5||t===2&&(n[0]>5||n[0]===5&&(r||n[1]!==ce))),n.length=1,r?(e.e=e.e-o+1,n[0]=1):n[0]=e.e=0;else if(o<n.length){if(r=t===1&&n[o]>=5||t===2&&(n[o]>5||n[o]===5&&(r||n[o+1]!==ce||n[o-1]&1))||t===3&&(r||!!n[0]),n.length=o,r){for(;++n[--o]>9;)if(n[o]=0,o===0){++e.e,n.unshift(1);break}}for(o=n.length;!n[--o];)n.pop()}return e}function Te(e,o,t){var r=e.e,n=e.c.join(""),i=n.length;if(o)n=n.charAt(0)+(i>1?"."+n.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)n="0"+n;n="0."+n}else if(r>0)if(++r>i)for(r-=i;r--;)n+="0";else r<i&&(n=n.slice(0,r)+"."+n.slice(r));else i>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&t?"-"+n:n}M.abs=function(){var e=new this.constructor(this);return e.s=1,e};M.cmp=function(e){var o,t=this,r=t.c,n=(e=new t.constructor(e)).c,i=t.s,s=e.s,a=t.e,l=e.e;if(!r[0]||!n[0])return r[0]?i:n[0]?-s:0;if(i!=s)return i;if(o=i<0,a!=l)return a>l^o?1:-1;for(s=(a=r.length)<(l=n.length)?a:l,i=-1;++i<s;)if(r[i]!=n[i])return r[i]>n[i]^o?1:-1;return a==l?0:a>l^o?1:-1};M.div=function(e){var o=this,t=o.constructor,r=o.c,n=(e=new t(e)).c,i=o.s==e.s?1:-1,s=t.DP;if(s!==~~s||s<0||s>we)throw Error(qe);if(!n[0])throw Error(qo);if(!r[0])return e.s=i,e.c=[e.e=0],e;var a,l,d,p,v,f=n.slice(),D=a=n.length,I=r.length,k=r.slice(0,a),S=k.length,g=e,R=g.c=[],U=0,L=s+(g.e=o.e-e.e)+1;for(g.s=i,i=L<0?0:L,f.unshift(0);S++<a;)k.push(0);do{for(d=0;d<10;d++){if(a!=(S=k.length))p=a>S?1:-1;else for(v=-1,p=0;++v<a;)if(n[v]!=k[v]){p=n[v]>k[v]?1:-1;break}if(p<0){for(l=S==a?n:f;S;){if(k[--S]<l[S]){for(v=S;v&&!k[--v];)k[v]=9;--k[v],k[S]+=10}k[S]-=l[S]}for(;!k[0];)k.shift()}else break}R[U++]=p?d:++d,k[0]&&p?k[S]=r[D]||0:k=[r[D]]}while((D++<I||k[0]!==ce)&&i--);return!R[0]&&U!=1&&(R.shift(),g.e--,L--),U>L&&ke(g,L,t.RM,k[0]!==ce),g};M.eq=function(e){return this.cmp(e)===0};M.gt=function(e){return this.cmp(e)>0};M.gte=function(e){return this.cmp(e)>-1};M.lt=function(e){return this.cmp(e)<0};M.lte=function(e){return this.cmp(e)<1};M.minus=M.sub=function(e){var o,t,r,n,i=this,s=i.constructor,a=i.s,l=(e=new s(e)).s;if(a!=l)return e.s=-l,i.plus(e);var d=i.c.slice(),p=i.e,v=e.c,f=e.e;if(!d[0]||!v[0])return v[0]?e.s=-l:d[0]?e=new s(i):e.s=1,e;if(a=p-f){for((n=a<0)?(a=-a,r=d):(f=p,r=v),r.reverse(),l=a;l--;)r.push(0);r.reverse()}else for(t=((n=d.length<v.length)?d:v).length,a=l=0;l<t;l++)if(d[l]!=v[l]){n=d[l]<v[l];break}if(n&&(r=d,d=v,v=r,e.s=-e.s),(l=(t=v.length)-(o=d.length))>0)for(;l--;)d[o++]=0;for(l=o;t>a;){if(d[--t]<v[t]){for(o=t;o&&!d[--o];)d[o]=9;--d[o],d[t]+=10}d[t]-=v[t]}for(;d[--l]===0;)d.pop();for(;d[0]===0;)d.shift(),--f;return d[0]||(e.s=1,d=[f=0]),e.c=d,e.e=f,e};M.mod=function(e){var o,t=this,r=t.constructor,n=t.s,i=(e=new r(e)).s;if(!e.c[0])throw Error(qo);return t.s=e.s=1,o=e.cmp(t)==1,t.s=n,e.s=i,o?new r(t):(n=r.DP,i=r.RM,r.DP=r.RM=0,t=t.div(e),r.DP=n,r.RM=i,this.minus(t.times(e)))};M.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e};M.plus=M.add=function(e){var o,t,r,n=this,i=n.constructor;if(e=new i(e),n.s!=e.s)return e.s=-e.s,n.minus(e);var s=n.e,a=n.c,l=e.e,d=e.c;if(!a[0]||!d[0])return d[0]||(a[0]?e=new i(n):e.s=n.s),e;if(a=a.slice(),o=s-l){for(o>0?(l=s,r=d):(o=-o,r=a),r.reverse();o--;)r.push(0);r.reverse()}for(a.length-d.length<0&&(r=d,d=a,a=r),o=d.length,t=0;o;a[o]%=10)t=(a[--o]=a[o]+d[o]+t)/10|0;for(t&&(a.unshift(t),++l),o=a.length;a[--o]===0;)a.pop();return e.c=a,e.e=l,e};M.pow=function(e){var o=this,t=new o.constructor("1"),r=t,n=e<0;if(e!==~~e||e<-_o||e>_o)throw Error(ye+"exponent");for(n&&(e=-e);e&1&&(r=r.times(o)),e>>=1,!!e;)o=o.times(o);return n?t.div(r):r};M.prec=function(e,o){if(e!==~~e||e<1||e>we)throw Error(ye+"precision");return ke(new this.constructor(this),e,o)};M.round=function(e,o){if(e===ce)e=0;else if(e!==~~e||e<-we||e>we)throw Error(qe);return ke(new this.constructor(this),e+this.e+1,o)};M.sqrt=function(){var e,o,t,r=this,n=r.constructor,i=r.s,s=r.e,a=new n("0.5");if(!r.c[0])return new n(r);if(i<0)throw Error(Le+"No square root");i=Math.sqrt(r+""),i===0||i===1/0?(o=r.c.join(""),o.length+s&1||(o+="0"),i=Math.sqrt(o),s=((s+1)/2|0)-(s<0||s&1),e=new n((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+s)):e=new n(i+""),s=e.e+(n.DP+=4);do t=e,e=a.times(t.plus(r.div(t)));while(t.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return ke(e,(n.DP-=4)+e.e+1,n.RM)};M.times=M.mul=function(e){var o,t=this,r=t.constructor,n=t.c,i=(e=new r(e)).c,s=n.length,a=i.length,l=t.e,d=e.e;if(e.s=t.s==e.s?1:-1,!n[0]||!i[0])return e.c=[e.e=0],e;for(e.e=l+d,s<a&&(o=n,n=i,i=o,d=s,s=a,a=d),o=new Array(d=s+a);d--;)o[d]=0;for(l=a;l--;){for(a=0,d=s+l;d>l;)a=o[d]+i[l]*n[d-l-1]+a,o[d--]=a%10,a=a/10|0;o[d]=a}for(a?++e.e:o.shift(),l=o.length;!o[--l];)o.pop();return e.c=o,e};M.toExponential=function(e,o){var t=this,r=t.c[0];if(e!==ce){if(e!==~~e||e<0||e>we)throw Error(qe);for(t=ke(new t.constructor(t),++e,o);t.c.length<e;)t.c.push(0)}return Te(t,!0,!!r)};M.toFixed=function(e,o){var t=this,r=t.c[0];if(e!==ce){if(e!==~~e||e<0||e>we)throw Error(qe);for(t=ke(new t.constructor(t),e+t.e+1,o),e=e+t.e+1;t.c.length<e;)t.c.push(0)}return Te(t,!1,!!r)};M[Symbol.for("nodejs.util.inspect.custom")]=M.toJSON=M.toString=function(){var e=this,o=e.constructor;return Te(e,e.e<=o.NE||e.e>=o.PE,!!e.c[0])};M.toNumber=function(){var e=Number(Te(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(e.toString()))throw Error(Le+"Imprecise conversion");return e};M.toPrecision=function(e,o){var t=this,r=t.constructor,n=t.c[0];if(e!==ce){if(e!==~~e||e<1||e>we)throw Error(ye+"precision");for(t=ke(new r(t),e,o);t.c.length<e;)t.c.push(0)}return Te(t,e<=t.e||t.e<=r.NE||t.e>=r.PE,!!n)};M.valueOf=function(){var e=this,o=e.constructor;if(o.strict===!0)throw Error(Le+"valueOf disallowed");return Te(e,e.e<=o.NE||e.e>=o.PE,!0)};var xo=Wo();const ur=W({name:"AdvancedNumberInput",props:{modelValue:{type:Number,required:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},min:Number,max:Number,step:{type:Number,default:1},format:Function,parse:Function,marks:{type:Object}},setup(e,{emit:o}){const{marks:t,step:r,min:n,max:i,modelValue:s,readonly:a,disabled:l}=Ao(e),d=x({get:()=>e.modelValue,set:y=>o("update:modelValue",y)}),p=x(()=>{if(!t.value)return null;const y=[];return Object.keys(t.value).forEach(C=>{y.push(Number(C))}),y.sort((C,O)=>C-O)}),v=y=>{const C=p.value;if(C){let O=C.findIndex(Q=>Q===d.value);if(O<0&&(O=Rt(d.value,C).index,O<0&&(console.error("number not found!",{idx:O,numbers:C,mValue:d.value,isNext:y}),O=0)),y){if(C[O+1]!==void 0)return C[O+1]}else if(C[O-1]!==void 0)return C[O-1]}return null},f=x(()=>{if(p.value)return v(!0);const y=i.value,C=new xo(d.value).add(r.value).toNumber();return y!==void 0?C<=y?C:null:C}),D=x(()=>f.value!==null),I=x(()=>{if(p.value)return v(!1);const y=n.value,C=new xo(d.value).minus(r.value).toNumber();return y!==void 0?C>=y?C:null:C}),k=x(()=>I.value!==null),S=()=>{D.value&&!e.disabled&&(d.value=f.value)},g=()=>{k.value&&!e.disabled&&(d.value=I.value)},R=N(""),U=y=>e.format?e.format(y):String(y);pe(s,y=>{R.value=U(y)},{immediate:!0});const L=()=>{if(a.value||l.value)return;let y;e.parse?y=e.parse(String(R.value))||0:y=Number(R.value)||0,e.max!==void 0&&y>e.max&&(y=e.max),e.min!==void 0&&y<e.min&&(y=e.min),e.step&&(y=Math.round(y/e.step)*e.step),d.value=y,R.value=U(y)},j=N(!1);return{mValue:d,handleUp:S,handleDown:g,isAllowUp:D,isAllowDown:k,nextUpValue:f,nextDownValue:I,marksNumberArray:p,inputValue:R,handleBlur:()=>{L(),j.value=!1},handleEnter:L,handleFocus:()=>{j.value=!0},isFocused:j,isDev:Qt}}});const fr=["readonly","disabled"],hr={key:0,class:"debug-val"},pr={class:"toggle-wrap"},vr=["disabled"],mr=["disabled"];function gr(e,o,t,r,n,i){return K(),J("div",{class:Pe(["advanced-number-input",{disabled:e.disabled,focused:e.isFocused}])},[en(m("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>e.inputValue=s),type:"text",class:"text-input",readonly:e.readonly,onFocus:o[1]||(o[1]=(...s)=>e.handleFocus&&e.handleFocus(...s)),onBlur:o[2]||(o[2]=(...s)=>e.handleBlur&&e.handleBlur(...s)),onKeyup:[o[3]||(o[3]=Be((...s)=>e.handleEnter&&e.handleEnter(...s),["enter"])),o[4]||(o[4]=Be((...s)=>e.handleUp&&e.handleUp(...s),["up"])),o[5]||(o[5]=Be((...s)=>e.handleDown&&e.handleDown(...s),["down"]))],disabled:e.disabled},null,40,fr),[[on,e.inputValue]]),e.isDev?(K(),J("div",hr,q(e.modelValue),1)):uo("",!0),m("div",pr,[m("button",{onClick:o[6]||(o[6]=(...s)=>e.handleUp&&e.handleUp(...s)),class:"btn-no-style btn-up",disabled:!e.isAllowUp||e.disabled},null,8,vr),m("button",{onClick:o[7]||(o[7]=(...s)=>e.handleDown&&e.handleDown(...s)),class:"btn-no-style btn-down",disabled:!e.isAllowDown||e.disabled},null,8,mr)])],2)}const Xo=Ne(ur,[["render",gr],["__scopeId","data-v-09db033d"]]);class br{constructor(o,t,r){ee(this,"stick");ee(this,"maxDistance");ee(this,"deadzone");ee(this,"dragStart");ee(this,"touchId");ee(this,"active");ee(this,"value");ee(this,"handleDown");ee(this,"areaNum");ee(this,"handleMove");ee(this,"handleUp");ee(this,"events");if(!o)throw new Error("stick is required");this.stick=o,this.maxDistance=t,this.deadzone=r,this.dragStart={x:0,y:0},this.touchId=null,this.areaNum=1/Math.sqrt(2),this.active=!1,this.value={x:0,y:0},this.handleDown=n=>{this.active=!0,this.stick.style.transition="0s",n.preventDefault(),n.changedTouches?this.dragStart={x:n.changedTouches[0].clientX,y:n.changedTouches[0].clientY}:this.dragStart={x:n.clientX,y:n.clientY},n.changedTouches&&(this.touchId=n.changedTouches[0].identifier),this.trigger("start",{...this.value,direction:this.getDirection()})},this.handleMove=n=>{if(!this.active)return;let i=null;if(n.changedTouches){for(let U=0;U<n.changedTouches.length;U++)this.touchId===n.changedTouches[U].identifier&&(i=U,n.clientX=n.changedTouches[U].clientX,n.clientY=n.changedTouches[U].clientY);if(i==null)return}const s=this.maxDistance,a=this.deadzone,l=n.clientX-this.dragStart.x,d=n.clientY-this.dragStart.y,p=Math.atan2(d,l),v=Math.min(s,Math.hypot(l,d)),f=v*Math.cos(p),D=v*Math.sin(p);this.stick.style.transform=`translate3d(${f}px, ${D}px, 0px)`;const I=v<a?0:s/(s-a)*(v-a),k=I*Math.cos(p),S=I*Math.sin(p),g=parseFloat((k/s).toFixed(4)),R=parseFloat((S/s).toFixed(4));this.value={x:g,y:R},this.trigger("pan",{...this.value,direction:this.getDirection()})},this.handleUp=n=>{this.active&&(this.trigger("end",{...this.value,direction:this.getDirection()}),!(n.changedTouches&&this.touchId!==n.changedTouches[0].identifier)&&(this.stick.style.transition=".2s",this.stick.style.transform="translate3d(0px, 0px, 0px)",this.value={x:0,y:0},this.touchId=null,this.active=!1))},this.stick.addEventListener("mousedown",this.handleDown),this.stick.addEventListener("touchstart",this.handleDown),document.addEventListener("mousemove",this.handleMove,{passive:!1}),document.addEventListener("touchmove",this.handleMove,{passive:!1}),document.addEventListener("mouseup",this.handleUp),document.addEventListener("touchend",this.handleUp),this.events={}}getDirection(){const{x:o,y:t}=this.value,r=this.areaNum;return o===0&&t===0?"C":t<0?o>r?"E":o<-r?"W":"N":o>r?"E":o<-r?"W":"S"}on(o,t){let r=this.events[o]=this.events[o]||[];return r.indexOf(t)===-1&&r.push(t),this}trigger(o,t){let r=this.events[o];return Array.isArray(r)&&r.forEach(n=>{n(t)}),this}off(o,t){let r=this.events[o];if(Array.isArray(r))if(t){let n=r.indexOf(t);n!==-1&&r.splice(n,1)}else r.length=0;return this}destroy(){this.events=null,this.stick&&(this.stick.removeEventListener("mousedown",this.handleDown),this.stick.removeEventListener("touchstart",this.handleDown)),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("touchmove",this.handleMove),document.removeEventListener("mouseup",this.handleUp),document.removeEventListener("touchend",this.handleUp)}}const wr=W({name:"JoyStick",emits:["direction","goRight","goStop","goUp","goDown","goLeft","onPan"],setup(e,{emit:o}){const t=tn(),r=N(),n=()=>{t.value=new br(r.value,75,10),t.value.on("pan",p=>{o("onPan",p)}),t.value.on("end",p=>{console.log("end",p),setTimeout(()=>{o("goStop")},210)})};return nn(()=>{setTimeout(()=>{n()})}),He(()=>{t.value&&t.value.destroy()}),{stickRef:r,goStop:()=>{o("goStop")},goUp:()=>{o("goUp")},goDown:()=>{o("goDown")},goLeft:()=>{o("goLeft")},goRight:()=>{o("goRight")},clickCenter(){o("direction","C")}}}});const We=e=>(Uo("data-v-33cc86f1"),e=e(),Vo(),e),yr={class:"joystick"},kr={class:"jst-tip tip-n"},Sr=We(()=>m("span",null,[m("i",{class:"icon-arrow"}),m("i",{class:"icon-arrow-active"})],-1)),_r=[Sr],xr={class:"jst-tip tip-e"},Rr=We(()=>m("span",null,[m("i",{class:"icon-arrow"}),m("i",{class:"icon-arrow-active"})],-1)),$r=[Rr],Pr={class:"jst-tip tip-s"},Dr=We(()=>m("span",null,[m("i",{class:"icon-arrow"}),m("i",{class:"icon-arrow-active"})],-1)),Cr=[Dr],Nr={class:"jst-tip tip-w"},Tr=We(()=>m("span",null,[m("i",{class:"icon-arrow"}),m("i",{class:"icon-arrow-active"})],-1)),Er=[Tr];function Mr(e,o,t,r,n,i){return K(),J("div",yr,[m("div",kr,[m("button",{class:"btn-up",onMousedown:o[0]||(o[0]=G((...s)=>e.goUp&&e.goUp(...s),["stop","prevent"])),onMouseup:o[1]||(o[1]=G((...s)=>e.goStop&&e.goStop(...s),["stop","prevent"])),onTouchstart:o[2]||(o[2]=G((...s)=>e.goUp&&e.goUp(...s),["stop","prevent"])),onTouchend:o[3]||(o[3]=G((...s)=>e.goStop&&e.goStop(...s),["stop","prevent"]))},_r,32)]),m("div",xr,[m("button",{class:"btn-right",onMousedown:o[4]||(o[4]=G((...s)=>e.goLeft&&e.goLeft(...s),["stop","prevent"])),onMouseup:o[5]||(o[5]=G((...s)=>e.goStop&&e.goStop(...s),["stop","prevent"])),onTouchstart:o[6]||(o[6]=G((...s)=>e.goLeft&&e.goLeft(...s),["stop","prevent"])),onTouchend:o[7]||(o[7]=G((...s)=>e.goStop&&e.goStop(...s),["stop","prevent"]))},$r,32)]),m("div",Pr,[m("button",{class:"btn-down",onMousedown:o[8]||(o[8]=G((...s)=>e.goDown&&e.goDown(...s),["stop","prevent"])),onMouseup:o[9]||(o[9]=G((...s)=>e.goStop&&e.goStop(...s),["stop","prevent"])),onTouchstart:o[10]||(o[10]=G((...s)=>e.goDown&&e.goDown(...s),["stop","prevent"])),onTouchend:o[11]||(o[11]=G((...s)=>e.goStop&&e.goStop(...s),["stop","prevent"]))},Cr,32)]),m("div",Nr,[m("button",{class:"btn-left",onMousedown:o[12]||(o[12]=G((...s)=>e.goRight&&e.goRight(...s),["stop","prevent"])),onMouseup:o[13]||(o[13]=G((...s)=>e.goStop&&e.goStop(...s),["stop","prevent"])),onTouchstart:o[14]||(o[14]=G((...s)=>e.goRight&&e.goRight(...s),["stop","prevent"])),onTouchend:o[15]||(o[15]=G((...s)=>e.goStop&&e.goStop(...s),["stop","prevent"]))},Er,32)]),m("div",{ref:"stickRef",class:"jst-stick",onClick:o[16]||(o[16]=(...s)=>e.clickCenter&&e.clickCenter(...s)),onTouchend:o[17]||(o[17]=(...s)=>e.clickCenter&&e.clickCenter(...s))},null,544)])}const Yo=Ne(wr,[["render",Mr],["__scopeId","data-v-33cc86f1"]]);function so(e,o,t,r){var n,i=!1,s=0;function a(){n&&clearTimeout(n)}function l(){a(),i=!0}typeof o!="boolean"&&(r=t,t=o,o=void 0);function d(){for(var p=arguments.length,v=new Array(p),f=0;f<p;f++)v[f]=arguments[f];var D=this,I=Date.now()-s;if(i)return;function k(){s=Date.now(),t.apply(D,v)}function S(){n=void 0}r&&!n&&k(),a(),r===void 0&&I>e?k():o!==!0&&(n=setTimeout(r?S:k,r===void 0?e-I:e))}return d.cancel=l,d}function Ir(e,o,t){return t===void 0?so(e,o,!1):so(e,t,o!==!1)}const oo=50,Ro=25,Ar=W({name:"GimbalControl",components:{JoyStick:Yo},setup(){const e=async(a={})=>{const l={pitch:(a.pitch||0)*oo,yaw:(a.yaw||0)*oo,roll:(a.roll||0)*oo,stop:a.stop||!1};await bo(l)},o=()=>{e({stop:!0})},t=()=>{e({pitch:-1})},r=()=>{e({pitch:1})},n=()=>{e({yaw:1})},i=()=>{e({yaw:-1})},s=so(200,!1,async a=>{const{x:l,y:d}=a,p={pitch:(d||0)*Ro,yaw:(l||0)*Ro,roll:0,stop:!1};await bo(p)});return{handleGimbalControl:e,goStop:o,goUp:t,goDown:r,goLeft:n,goRight:i,handlePan:s}}});function Lr(e,o,t,r,n,i){const s=Yo;return K(),ro(s,{onGoStop:e.goStop,onGoUp:e.goUp,onGoDown:e.goDown,onGoLeft:e.goLeft,onGoRight:e.goRight,onOnPan:e.handlePan},null,8,["onGoStop","onGoUp","onGoDown","onGoLeft","onGoRight","onOnPan"])}const Jo=Ne(Ar,[["render",Lr]]),$o=(e={})=>{const{getVal:o,setVal:t,time:r=300}=e,n=N(0),i=N(!1),s=x(()=>i.value?n.value:o()),a=Ir(r,!1,async(...d)=>{await t(...d),i.value=!1});return{displayVal:s,handleUpdate:d=>{i.value=!0,n.value=d,a(d)}}},zr=(e="",o=0)=>({parseFn:t=>{t=String(t);const r=new RegExp(`(,|${e}|\\s)`,"g"),n=t.replace(r,"").trim();return/^\d+(\.(\d+)?)?$/.test(n)?Number(n):n===""?null:Number.NaN},formatFn:t=>t===null?"0":`${Number(t).toFixed(o)} ${e}`}),Fr=W({name:"MainController",components:{AdvancedNumberInput:Xo,PresetPos:Go,GimbalControl:Jo},setup(){const e=Lo(),{t:o}=zo();He(()=>{e.isPauseUpdateAiTrace=!1});const t=async f=>{try{e.isActionLock=!0,wo||await an({mode:f}),e.wsData.af_mode=f}catch(D){console.error(D)}finally{e.isActionLock=!1}},{displayVal:r,handleUpdate:n}=$o({getVal:()=>e.wsData.mf_position,setVal:async f=>{try{e.isActionLock=!0,wo||await ln({position:f}),e.wsData.mf_position=f}catch(D){console.error(D)}finally{e.isActionLock=!1}}}),i=async f=>{try{e.isActionLock=!0,f!==eo.NONE&&f===e.wsData.target&&(f=eo.NONE),await dn({target:f}),e.wsData.target=f,e.isPauseUpdateAiTrace=!0,setTimeout(()=>{e.isPauseUpdateAiTrace=!1},1500)}catch(D){console.error(D)}finally{e.isActionLock=!1}},s=async()=>{try{if(e.isActionLock=!0,e.wsData.sdcard.status===$e.NOT_PLUGGED_IN){window.$toast.error(o("messages.cam_fail_no_sd"));return}if(e.wsData.sdcard.status===$e.NO_ENOUGH_SPACE){window.$toast.error(o("messages.cam_fail_sd_full"));return}if(e.wsData.sdcard.status!==$e.PLUGGED_IN){window.$toast.error(o("api_message.sd_card_error"));return}await cn({capture:!e.wsData.capture})}catch(f){console.error(f)}finally{setTimeout(()=>{e.isActionLock=!1},500)}},a=N(!1),l=async()=>{try{if(e.isActionLock=!0,e.wsData.sdcard.status===$e.NOT_PLUGGED_IN){window.$toast.error(o("messages.rec_fail_no_sd"));return}if(e.wsData.sdcard.status===$e.NO_ENOUGH_SPACE){window.$toast.error(o("messages.rec_fail_sd_full"));return}if(e.wsData.sdcard.status!==$e.PLUGGED_IN){window.$toast.error(o("api_message.sd_card_error"));return}await un({record:!e.wsData.record}),a.value=!0,setTimeout(()=>{a.value=!1},2e3)}catch(f){console.error(f)}finally{setTimeout(()=>{e.isActionLock=!1},500)}},{displayVal:d,handleUpdate:p}=$o({getVal:()=>e.wsData.ratio,setVal:async f=>{try{e.isActionLock=!0,await fn({ratio:f,speed:10}),e.wsData.ratio=f}catch(D){console.error(D)}finally{e.isActionLock=!1}}}),v=zr("x",2);return{CameraFocusMode:rn,CameraTraceTarget:eo,handleChangeFM:t,mfPositionDisplay:r,handleUpdateFocusPosition:n,CameraTraceTargetOptionsList:sn,handleSetAiTrace:i,handleToggleCapture:s,handleToggleRecord:l,mainStore:e,zoomRatioDisplay:d,handleUpdateZoomRatio:p,isLockRecord:a,numberInputFormatters:v}}}),Ur=""+new URL("icon_view_n-c79f5560.svg",import.meta.url).href,Vr=""+new URL("icon_ai_n-fea66562.svg",import.meta.url).href,Or=""+new URL("icon_capture_n-c3823f5a.svg",import.meta.url).href,Br=""+new URL("icon_focus_n-e4e2adc1.svg",import.meta.url).href;const jr={key:0,class:"main-controller",style:{"text-align":"center",color:"red"}},Kr={key:1,class:"main-controller"},Hr={class:"main-left"},Gr={class:"control-card"},qr={class:"s-header"},Wr=m("img",{src:Ur,class:"h-icon"},null,-1),Xr={class:"s-content _pl"},Yr={class:"ptz-progress-wrap"},Jr={class:"main-right"},Zr={class:"control-card"},Qr={class:"s-header"},ei=m("img",{src:Vr,class:"h-icon"},null,-1),oi={class:"s-content _pm"},ti={class:"fn-btns-list"},ni=["value","onClick"],ri={class:"control-card"},ii={class:"s-header"},si=m("img",{src:Or,class:"h-icon"},null,-1),ai={class:"s-content _pm"},li={class:"fn-btns-list"},di=["disabled"],ci=["disabled"],ui={class:"control-card"},fi={class:"s-header"},hi=m("img",{src:Br,class:"h-icon"},null,-1),pi={class:"s-content _ps"},vi={class:"s-title"},mi={class:"focus-progress-wrap"};function gi(e,o,t,r,n,i){const s=Jo,a=zn,l=Xo,d=Go,p=$t,v=hn;return e.mainStore.isWsFailed?(K(),J("div",jr,q(e.$t("messages.device_conn_fail")),1)):(K(),J("div",Kr,[m("div",{class:Pe(["action-locker",[e.mainStore.isActionLock&&"visible"]])},null,2),m("div",Hr,[m("div",Gr,[m("div",qr,[Wr,Ee(q(e.$t("common.gimbal")),1)]),m("div",Xr,[re(s),m("div",Yr,[re(a,{class:"input-progress",value:e.zoomRatioDisplay,step:.01,min:1,max:4,"onUpdate:value":e.handleUpdateZoomRatio},null,8,["value","step","onUpdate:value"]),re(l,{"model-value":e.mainStore.wsData.ratio,"onUpdate:modelValue":e.handleUpdateZoomRatio,step:.01,min:1,max:4,format:e.numberInputFormatters.formatFn,parse:e.numberInputFormatters.parseFn},null,8,["model-value","onUpdate:modelValue","step","format","parse"])])])]),re(d)]),m("div",Jr,[m("div",Zr,[m("div",Qr,[ei,Ee(" "+q(e.$t("common.ai")),1)]),m("div",oi,[m("div",ti,[(K(!0),J(Ae,null,Fo(e.CameraTraceTargetOptionsList,f=>(K(),J(Ae,{key:f.value},[f.hidden?uo("",!0):(K(),J("button",{key:0,value:f.value,class:Pe([{active:f.value===e.mainStore.wsData.target},"btn-no-style themed-button"]),onClick:D=>e.handleSetAiTrace(f.value)},q(e.$t("actions."+f.label)),11,ni))],64))),128))])])]),m("div",ri,[m("div",ii,[si,Ee(" "+q(e.$t("common.filming")),1)]),m("div",ai,[m("div",li,[m("button",{disabled:e.mainStore.isActionLock,class:Pe([{active:e.mainStore.wsData.capture},"btn-no-style themed-button"]),onClick:o[0]||(o[0]=(...f)=>e.handleToggleCapture&&e.handleToggleCapture(...f))},q(e.mainStore.wsData.capture?e.$t("actions.stop_capture"):e.$t("actions.start_capture")),11,di),m("button",{disabled:e.mainStore.isActionLock||e.mainStore.wsData.capture||e.isLockRecord,class:Pe([{active:e.mainStore.wsData.record},"btn-no-style themed-button"]),onClick:o[1]||(o[1]=(...f)=>e.handleToggleRecord&&e.handleToggleRecord(...f))},q(e.mainStore.wsData.record?e.$t("actions.stop_record"):e.$t("actions.start_record")),11,ci)])])]),m("div",ui,[m("div",fi,[hi,Ee(" "+q(e.$t("common.focus")),1)]),m("div",pi,[re(v,{vertical:""},{default:Ie(()=>[re(v,{justify:"space-between",align:"center"},{default:Ie(()=>[m("span",null,q(e.$t("common.auto")),1),re(p,{value:e.mainStore.wsData.af_mode,"checked-value":e.CameraFocusMode.AFC,"unchecked-value":e.CameraFocusMode.MF,"onUpdate:value":e.handleChangeFM,size:"large"},null,8,["value","checked-value","unchecked-value","onUpdate:value"])]),_:1}),re(v,{class:Pe({"content-disabled":e.mainStore.wsData.af_mode!==e.CameraFocusMode.MF}),style:{"margin-top":"40px"},justify:"space-between",align:"center"},{default:Ie(()=>[m("span",vi,q(e.$t("common.manual_focus")),1),m("div",mi,[re(a,{style:{width:"300px"},value:e.mfPositionDisplay,step:1,min:0,max:100,"onUpdate:value":e.handleUpdateFocusPosition,disabled:e.mainStore.wsData.af_mode!==e.CameraFocusMode.MF},null,8,["value","onUpdate:value","disabled"]),re(l,{"model-value":e.mfPositionDisplay,"onUpdate:modelValue":e.handleUpdateFocusPosition,step:1,min:0,max:100,disabled:e.mainStore.wsData.af_mode!==e.CameraFocusMode.MF},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["class"])]),_:1})])])])]))}const Si=Ne(Fr,[["render",gi]]);export{Si as default};
